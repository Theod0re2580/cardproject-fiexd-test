<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <title>í˜œíƒ ì¶”ê°€</title>

    <script>
        function searchCard() {
            let keyword = document.getElementById("cardSearch").value;

            if (keyword.length < 1) {
                document.getElementById("searchResult").innerHTML = "";
                return;
            }

            fetch("/admin/cards/search?keyword=" + keyword)
                .then(res => res.json())
                .then(data => {
                    let html = "";
                    data.forEach(card => {
                        html += `
                        <div style="margin-bottom:5px;">
                            <span>[${card.id}] ${card.cardName}</span>
                            <button type="button" onclick="selectCard(${card.id})">ì„ íƒ</button>
                        </div>
                    `;
                    });
                    document.getElementById("searchResult").innerHTML = html;
                });
        }

        function selectCard(cardId) {
            document.getElementById("cardId").value = cardId;
            alert("ì¹´ë“œ ID " + cardId + " ì„ íƒë¨!");
        }
    </script>

</head>
<body>

<h1>í˜œíƒ ì¶”ê°€</h1>

<form action="/admin/benefits/add" method="post">

    <label>í˜œíƒëª…</label><br>
    <input type="text" name="bnfName" required><br><br>

    <label>í˜œíƒ ë‚´ìš©</label><br>
    <textarea name="bnfContent" rows="3"></textarea><br><br>

    <label>í˜œíƒ ìƒì„¸</label><br>
    <textarea name="bnfDetail" rows="5"></textarea><br><br>

    <!-- ğŸ”¥ ì¹´ë“œ ê²€ìƒ‰ ê¸°ëŠ¥ -->
    <label>ì¹´ë“œ ê²€ìƒ‰</label><br>
    <input type="text" id="cardSearch" placeholder="ì¹´ë“œëª… ê²€ìƒ‰" onkeyup="searchCard()">
    <div id="searchResult"
         style="border:1px solid #aaa; padding:10px; margin-top:5px; width:300px;"></div>
    <br>

    <!-- ì„ íƒí•œ ì¹´ë“œID ë“¤ì–´ê°€ëŠ” hidden -->
    <label>ì„ íƒëœ ì¹´ë“œ ID</label><br>
    <input type="text" id="cardId" name="cardId" readonly required><br><br>

    <button type="submit">ë“±ë¡í•˜ê¸°</button>
</form>

</body>
</html>
