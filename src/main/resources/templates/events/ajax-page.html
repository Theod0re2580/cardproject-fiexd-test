<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <title>카드 브랜드별 혜택</title>
    <style>
        body { font-family: 'Segoe UI', sans-serif; background: #f4f6f8; margin: 0; padding: 20px; }
        h1 { text-align: center; color: #333; }
        .brand-buttons { display: flex; flex-wrap: wrap; justify-content: center; gap: 15px; margin: 25px 0; }
        .brand-buttons button {
            padding: 12px 25px; border: none; border-radius: 8px;
            background: linear-gradient(135deg, #007bff, #00c6ff);
            color: white; font-weight: bold; cursor: pointer;
            transition: 0.3s;
        }
        .brand-buttons button:hover { transform: translateY(-2px); box-shadow: 0 5px 10px rgba(0,0,0,0.2); }
        .card-list { display: flex; flex-wrap: wrap; gap: 25px; justify-content: center; }
        .card-item {
            background: white; border-radius: 12px; width: 260px; padding: 15px;
            box-shadow: 0 4px 10px rgba(0,0,0,0.1); transition: 0.3s; text-align: center;
        }
        .card-item:hover { transform: translateY(-5px); }
        .card-item img { width: 100%; height: 160px; object-fit: contain; border-radius: 8px; margin-bottom: 8px; }
        .benefit-title { font-weight: bold; color: #007bff; margin-top: 10px; }
        .bnfDetail { font-size: 0.9em; color: #444; white-space: pre-line; }
    </style>
</head>
<body>
<h1>카드 브랜드별 혜택</h1>

<!-- 브랜드 버튼 -->
<div class="brand-buttons">
    <button th:each="brand : ${brands}"
            th:text="${brand}"
            th:onclick="'loadCards(\\'' + ${brand} + '\\')'"></button>
</div>

<!-- 카드 리스트 영역 -->
<div id="cardList" class="card-list">
    <p style="text-align:center;color:#555;">브랜드를 선택하세요.</p>
</div>

<script>
    async function loadCards(brand) {
        const list = document.getElementById("cardList");
        list.innerHTML = "<p style='text-align:center;color:#666;'>불러오는 중...</p>";

        try {
            const res = await fetch(`/events/api/brand?brand=${encodeURIComponent(brand)}`);
            if (!res.ok) throw new Error("요청 실패");
            const data = await res.json();
            if (data.length === 0) {
                list.innerHTML = `<p style='text-align:center;color:#777;'>${brand} 브랜드 카드가 없습니다.</p>`;
                return;
            }

            list.innerHTML = data.map(ev => `
            <div class="card-item">
                <img src="${ev.card.cardImg || '/images/bono.png'}" onerror="this.src='/images/bono.png'">
                <h3>${ev.cardName}</h3>
                <p>브랜드: ${ev.cardBrand}</p>
                <p class="benefit-title">혜택</p>
                <p>${ev.bnfContent || ''}</p>
                <p class="benefit-title">상세 혜택</p>
                <p class="bnfDetail">${ev.bnfDetail || ''}</p>
            </div>
        `).join("");
        } catch (e) {
            console.error(e);
            list.innerHTML = "<p style='text-align:center;color:red;'>데이터를 불러오지 못했습니다.</p>";
        }
    }
</script>
</body>
</html>
